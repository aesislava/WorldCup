<!DOCTYPE html>
<html>
	<head>
		<title>World Cup Results</title>
		<meta charset='UTF-8' />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="resources/bootstrap.min.css">
		<link rel="stylesheet" href="resources/style.css">
	</head>
	<body>
    <div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="#">Home</a></li>
        </ul>
        <h3 class="text-muted">Hack Bulgaria World Cup</h3>
      </div>
		<hr>
		<div id="my_container">
		<script id="match_template" type="text/x-handlebars-template">
	  {{#each match}}
      <div class="jumbotron">
      <div class="progress_bar">{{this.progress}}</div>
      <div class="timer">{{this.time_left}} minutes left</div>

        <span class="country countryLeft">{{this.home_team.country}}</span>
        <div class="flag left_flag">
        <img src="resources/flags/{{this.home_team.code}}.png">
        </div>
        <div class="results">
        	<span class="result_left">{{this.home_team.goals}}</span>
        	<span class="result_right">{{this.away_team.goals}}</span>
        </div>
        <span class="country countryRight" >{{this.away_team.country}}</span>
        <div class="flag right_flag">
        <img src="resources/flags/{{this.away_team.code}}.png">
        </div>
      </div>
      {{/each}}
      </script>
      </div>
      <div class="footer">
        <p>Â© HackBulgaria 2014</p>
      </div>
    </div> <!-- /container -->
    <script src="resources/jquery-1.11.0.min.js"></script>
	<script src="resources/handlebars-v1.3.0.js"></script>
	<script src="resources/bootstrap.min.js"></script>
    <script>
    		var MATCHES = {
    			handlerData : function(resJSON) {
    				console.log(resJSON);
		    		var source = $("#match_template").html(); 
					var template = Handlebars.compile(source); 
					matchHTML = template({
						match: resJSON
					});
					$('#my_container').html(matchHTML);
    			},
    			loadMatchesData : function() {
    				$.ajax({
		                url:"http://worldcup.sfg.io/matches/today.json",
		                method:'get',
		                success:this.handlerData
		            });
    			}
    		};

    		$(document).ready(function() {
    			MATCHES.loadMatchesData();
    		});
    </script>
</body>
	
</html>